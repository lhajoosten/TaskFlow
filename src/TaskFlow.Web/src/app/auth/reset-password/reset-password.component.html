<div class="reset-password-container">
    <mat-card class="reset-password-card">
        <mat-card-header>
            <mat-card-title>Set New Password</mat-card-title>
            <mat-card-subtitle>Choose a strong password for your account</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <ng-container *ngIf="!isResetComplete; else resetComplete">
                <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>New Password</mat-label>
                        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
                        <mat-icon matPrefix>lock</mat-icon>
                        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="resetForm.get('password')?.hasError('required')">Password is
                            required</mat-error>
                        <mat-error *ngIf="resetForm.get('password')?.hasError('minlength')">Password must be at least 8
                            characters</mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Confirm Password</mat-label>
                        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="confirmPassword">
                        <mat-icon matPrefix>lock</mat-icon>
                        <mat-error *ngIf="resetForm.get('confirmPassword')?.hasError('required')">Please confirm your
                            password</mat-error>
                        <mat-error *ngIf="resetForm.get('confirmPassword')?.hasError('passwordMismatch')">Passwords do
                            not match</mat-error>
                    </mat-form-field>

                    <button mat-raised-button color="primary" class="full-width submit-button" type="submit"
                        [disabled]="resetForm.invalid">
                        Reset Password
                    </button>
                </form>
            </ng-container>

            <ng-template #resetComplete>
                <div class="success-message">
                    <mat-icon color="primary">check_circle</mat-icon>
                    <h3>Password Reset Complete!</h3>
                    <p>Your password has been successfully updated.</p>
                    <button mat-raised-button color="primary" routerLink="/auth/login">Sign In</button>
                </div>
            </ng-template>
        </mat-card-content>
    </mat-card>
</div>
@use '@angular/material' as mat;
@use './styles/theme' as theme;
@use './styles/responsive' as responsive;
@use 'styles/scrollbar';
@use 'sass:map';
@use 'sass:meta';

// Helper function to get color from palette
@function get-color-from-palette($palette, $hue: 'default') {
  @if meta.type-of($palette) == 'map' {
    @return map.get($palette, $hue);
  } @else {
    @return $palette; // Return as-is if it's already a color
  }
}

// Include the common styles for Angular Material
@include mat.core();

// Apply themes to root elements
:root {
  --primary-color: #{get-color-from-palette(map.get(theme.$light-theme, 'primary'))};
  --accent-color: #{get-color-from-palette(map.get(theme.$light-theme, 'accent'))};
  --background-color: #{get-color-from-palette(map.get(theme.$light-theme, 'background', 'background'))};

  --elevation-1: rgba(0, 0, 0, 0.02);
  --elevation-2: rgba(0, 0, 0, 0.04);
  --elevation-3: rgba(0, 0, 0, 0.06);
  --elevation-4: rgba(0, 0, 0, 0.08);

  // Soft contrast for text readability
  --text-color: #333;
  --neutral-color: #666;
}

// Dark mode styles
.dark-theme {
  --primary-color: #{get-color-from-palette(map.get(theme.$dark-theme, 'primary'))};
  --accent-color: #{get-color-from-palette(map.get(theme.$dark-theme, 'accent'))};
  --background-color: #{get-color-from-palette(map.get(theme.$dark-theme, 'background', 'background'))};

  --elevation-1: rgba(255, 255, 255, 0.05);
  --elevation-2: rgba(255, 255, 255, 0.08);
  --elevation-3: rgba(255, 255, 255, 0.11);
  --elevation-4: rgba(255, 255, 255, 0.12);

  // Soft contrast for text readability
  --text-color: #e0e0e0;
  --neutral-color: #b0b0b0;
}

// Apply global theme styles
@include mat.all-component-themes(theme.$light-theme);

// Dark mode override
.dark-theme {
  @include mat.all-component-colors(theme.$dark-theme);
}

// Global styles
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

body {
  font-family: Roboto, 'Helvetica Neue', sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  @include responsive.theme-transition;
}
